doctype html
html
  head
    meta(name="viewport" content="width=device-width, initial-scale=1")
    title Snallabot Dashboard Error
    link(rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossOrigin="anonymous")
  body
    .container.py-4
      .row
        .col-md-8.mx-auto
          .card.shadow-sm
            .card-header.bg-white
              h4.mb-0 Error!
            .card-body
              if canUnlink
                button.btn.btn-danger.mb-3#unlinkBtn(type="button") Unlink League
              .alert.alert-danger
                strong There was an error in processing:
                br
                | !{error}
              .d-flex.justify-content-between.mt-4
                a.btn.btn-outline-secondary(href="/dashboard") Back to login
    script.
      document.getElementById('unlinkBtn')?.addEventListener('click', async function () {
        try {
          const response = await fetch(window.location.pathname + '/unlink', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            }
          });

          if (response.ok) {
            window.location.href = '/dashboard';
          } else {
            alert('Failed to unlink league.');
          }
        } catch (error) {
          console.error('Error unlinking league:', error);
          alert('An error occurred while unlinking the league.');
        }
      });